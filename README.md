# Telegram Monitor Bot with .env and Absolute Session Path

## üìå –û–ø–∏—Å–∞–Ω–∏–µ

–ë–æ—Ç —Å–∫–∞–Ω–∏—Ä—É–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–µ Telegram-–∫–∞–Ω–∞–ª—ã —Å –ø–æ–º–æ—â—å—é Telethon UserBot –∏ –Ω–∞—Ö–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏—è, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –∑–∞–¥–∞–Ω–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞. –ù–∞–π–¥–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–µ—Ä–µ—Å—ã–ª–∞—é—Ç—Å—è –≤ Telegram-–ø—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±–µ—Ä—É—Ç—Å—è –∏–∑ `.env`.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

- `bot/` ‚Äî Telegram-–±–æ—Ç –Ω–∞ Aiogram
- `monitor/` ‚Äî Telethon UserBot –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞–Ω–∞–ª–æ–≤
- `monitor/session/` ‚Äî –ø–∞–ø–∫–∞ –¥–ª—è —Å–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telethon
- `api/` ‚Äî Flask REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏
- `db/` ‚Äî —Å–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ SQLite –±–∞–∑—ã
- `data/` ‚Äî —Å–æ–¥–µ—Ä–∂–∏—Ç `botdata.db`
- `.env` ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (API ID, HASH, BOT TOKEN)
- `run.py` ‚Äî –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞ –∏ —Å–∫–∞–Ω–µ—Ä–∞
- `requirements.txt` ‚Äî —Å–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `.env`

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
TELEGRAM_API_ID=–≤–∞—à_api_id
TELEGRAM_API_HASH=–≤–∞—à_api_hash
TELEGRAM_API_TOKEN=—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞_–æ—Ç_BotFather
```

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ VPS (Ubuntu)

1. –£—Å—Ç–∞–Ω–æ–≤–∏ Python –∏ pip:

```bash
sudo apt update && sudo apt install python3-pip -y
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
pip3 install -r requirements.txt
```

3. –°–æ–∑–¥–∞–π `.env` —Ñ–∞–π–ª:

```bash
nano .env
# –≤—Å—Ç–∞–≤—å TELEGRAM_API_ID, TELEGRAM_API_HASH –∏ TELEGRAM_API_TOKEN
```

4. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:

```bash
python3 db/init_db.py
```

5. –ó–∞–ø—É—Å—Ç–∏ Flask API:

```bash
python3 api/app.py
```

6. –î–æ–±–∞–≤—å –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞, –∫–∞–Ω–∞–ª—ã –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ CURL –∏–ª–∏ Postman:

```bash
curl -X POST http://localhost:5000/add/keyword -H "Content-Type: application/json" -d '{"word":"–≤–∞–∫–∞–Ω—Å–∏—è"}'
curl -X POST http://localhost:5000/add/channel -H "Content-Type: application/json" -d '{"link":"https://t.me/examplechannel"}'
curl -X POST http://localhost:5000/add/user -H "Content-Type: application/json" -d '{"user_id":123456789}'
```

7. –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ `watcher.py` ‚Äî –ø—Ä–æ–π—Ç–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é:

```bash
python3 monitor/watcher.py
# –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä, Telegram –ø—Ä–∏—à–ª—ë—Ç –∫–æ–¥
```

8. –ó–∞–ø—É—Å—Ç–∏ –≤—Å—ë –≤–º–µ—Å—Ç–µ:

```bash
python3 run.py
```

---

## üåê REST API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –ú–µ—Ç–æ–¥ | URL                | JSON-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã                   |
|-------|--------------------|----------------------------------|
| POST  | `/add/keyword`     | `{ "word": "–≤–∞–∫–∞–Ω—Å–∏—è" }`         |
| POST  | `/add/channel`     | `{ "link": "https://..." }`      |
| POST  | `/add/user`        | `{ "user_id": 123456789 }`       |
| GET   | `/get/all`         | ‚Äî                                |

---

## üí° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å** –∫ `user.session` ‚Üí –º–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫ –Ω–∞ VPS
- –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `.env`
- –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö ‚Äî SQLite

---

## üõ° –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ù–µ –ø—É–±–ª–∏–∫—É–π `.env` –∏ `.session` —Ñ–∞–π–ª—ã
- –ü—Ä–∏ –ø–æ—Ç–µ—Ä–µ –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ session-—Ñ–∞–π–ª–æ–º ‚Äî —É–¥–∞–ª–∏ `user.session` –∏ –∞–≤—Ç–æ—Ä–∏–∑—É–π—Å—è –∑–∞–Ω–æ–≤–æ

---

## üì¶ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è (–ø–æ –∂–µ–ª–∞–Ω–∏—é)

–î–æ–±–∞–≤–∏–º –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ `systemd`, `supervisor`, Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–ª–∏ HTTPS —á–µ—Ä–µ–∑ nginx –ø–æ —Ç–≤–æ–µ–º—É –∑–∞–ø—Ä–æ—Å—É.